<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Claude Code Configuration ‚Ä¢ realestatebr</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Claude Code Configuration"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">realestatebr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Claude Code Configuration</h1>

    </div>

<div id="claude-code-configuration" class="section level1">

<p>This file contains configuration and commands for Claude Code to help with package development.</p>
<div class="section level2">
<h2 id="package-information">Package Information<a class="anchor" aria-label="anchor" href="#package-information"></a></h2>
<ul><li>
<strong>Package Name</strong>: realestatebr</li>
<li>
<strong>Type</strong>: R Package for Brazilian real estate market data</li>
<li>
<strong>Main Branch</strong>: main</li>
<li>
<strong>Mission</strong>: Create the definitive R package for Brazilian real estate data - reliable, well-documented, and easy to use</li>
</ul></div>
<div class="section level2">
<h2 id="current-challenges">Current challenges<a class="anchor" aria-label="anchor" href="#current-challenges"></a></h2>
<ul><li>Multiple legacy functions with inconsistent interfaces leading to unexpected errors.</li>
<li>Core functions aren‚Äôt working at all.</li>
</ul></div>
<div class="section level2">
<h2 id="goals-for-v06x">Goals for v0.6.x<a class="anchor" aria-label="anchor" href="#goals-for-v06x"></a></h2>
<ul><li>Simplify codebase by removing (1) obsolete/outdated/unnecessary functions, (2) obsolete/outdated/unnecessary documentation, (3) repetitive import/download logic, (4) unnecessary complexity.</li>
</ul><p>The codebase of this package is very large and overly complex for its purpose.</p>
<ol style="list-style-type: decimal"><li><p>Almost all of the functions are now internal, but still feature extensive documentation. We can supress/simplify this by removing examples and other unnecessary details. We shoudld, however, keep the ‚Äòcore‚Äô of the documentation (title, description, param, source, references, etc.) since this is useful for developers.</p></li>
<li><p>There are still several functions with the sole purpose of printing deprecation warnings. These should be removed entirely.</p></li>
<li><p>Several functions have questionable metadata like ‚Äòdownload_time‚Äô, ‚Äòdownload_info‚Äô, etc. These should be kept only if they serve a clear purpose. Otherwise, they should be removed.</p></li>
<li><p>The import/download logic is repeated in several places. This should be consolidated into generic helper functions that can be reused across datasets.</p></li>
<li><p>There is currently some ambiguity with the word ‚Äòlegacy‚Äô in this package. Due to architcture transition in v0.4.0, all functions except <code><a href="reference/list_datasets.html">list_datasets()</a></code> and <code><a href="reference/get_dataset.html">get_dataset()</a></code> are considered ‚Äòlegacy‚Äô. However, these functions are the backbone of the package. The only change is that they are now internal. Despite this, several functions ‚Äútreat‚Äù them as if they were legacy. The core <code>get_from_legacy_function</code> for instance implies that it calls legacy functions, when in fact it calls the main internal functions. This is confusing and should be fixed.</p></li>
</ol></div>
<div class="section level2">
<h2 id="goals-for-v05x">Goals for v0.5.x<a class="anchor" aria-label="anchor" href="#goals-for-v05x"></a></h2>
<ul><li>Have all core functions working perfectly. This means <code><a href="reference/get_dataset.html">get_dataset()</a></code> should work flawlessly for all datasets with both <code>source = 'cache'</code> and <code>source = 'fresh'</code>.</li>
<li>Make sure that ALL datasets can be imported via ‚Äòcache‚Äô. This ensures that the user can always get the data quickly and conviniently.</li>
<li>Make sure the targets pipeline is fully functional and can update all datasets automatically on a weekly basis.</li>
<li>Make codebase simpler by abandoning legacy functions, deprecation warnings, etc. In other words, make breaking changes if (1) it makes the codebase simpler; (2) makes the codebase significantly more efficient; (3) makes the codebaes less error-prone; and (4) makes the end-user experience better.</li>
</ul></div>
<div class="section level2">
<h2 id="architecture-transition-status">Architecture Transition Status<a class="anchor" aria-label="anchor" href="#architecture-transition-status"></a></h2>
<div class="section level3">
<h3 id="phase-1-core-functions--completed-v040">Phase 1: Core Functions ‚úÖ COMPLETED (v0.4.0)<a class="anchor" aria-label="anchor" href="#phase-1-core-functions--completed-v040"></a></h3>
<ul><li>‚úÖ <code><a href="reference/list_datasets.html">list_datasets()</a></code> and <code><a href="reference/get_dataset.html">get_dataset()</a></code> functions implemented</li>
<li>‚úÖ Dataset registry system created</li>
<li>‚úÖ Unified API with backward compatibility</li>
<li>‚úÖ All legacy functions modernized</li>
</ul></div>
<div class="section level3">
<h3 id="phase-2-data-pipeline--completed">Phase 2: Data Pipeline ‚úÖ COMPLETED<a class="anchor" aria-label="anchor" href="#phase-2-data-pipeline--completed"></a></h3>
<ul><li>‚úÖ {targets} workflow for automated data processing</li>
<li>‚úÖ Weekly GitHub Actions workflow</li>
<li>‚úÖ 37 targets across 12 datasets</li>
<li>‚úÖ Data validation and quality checks</li>
</ul></div>
<div class="section level3">
<h3 id="phase-3-scale-up--planned">Phase 3: Scale Up ‚è≥ PLANNED<a class="anchor" aria-label="anchor" href="#phase-3-scale-up--planned"></a></h3>
<ul><li>‚è≥ DuckDB integration for large datasets (ITBI, IPTU)</li>
<li>‚è≥ Lazy query support</li>
<li>‚è≥ Large dataset handling</li>
</ul><div class="section level4">
<h4 id="id_-manual-review-needed">üîç MANUAL REVIEW NEEDED<a class="anchor" aria-label="anchor" href="#id_-manual-review-needed"></a></h4>
<ul><li>
<strong>CBIC cleaning scripts</strong>: Review each table‚Äôs data processing logic manually
<ul><li>Monthly consumption tables: Date parsing and state matching</li>
<li>Steel production: Multi-header Excel structure validation</li>
<li>PIM data: Excel serial date conversion verification</li>
<li>CUB prices: State abbreviation mapping accuracy</li>
</ul></li>
</ul></div>
</div>
</div>
<div class="section level2">
<h2 id="core-technologies--dependencies">Core Technologies &amp; Dependencies<a class="anchor" aria-label="anchor" href="#core-technologies--dependencies"></a></h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Core package dependencies</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>          <span class="co"># Data manipulation</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>          <span class="co"># Data tidying</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span>          <span class="co"># Data reading</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/" class="external-link">rvest</a></span><span class="op">)</span>          <span class="co"># Web scraping</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://httr.r-lib.org/" class="external-link">httr</a></span><span class="op">)</span>           <span class="co"># HTTP requests</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vubiostat/r-yaml/" class="external-link">yaml</a></span><span class="op">)</span>           <span class="co"># Configuration files</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span>           <span class="co"># String templates</span></span>
<span></span>
<span><span class="co"># Development tools</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span>       <span class="co"># Package development</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org" class="external-link">usethis</a></span><span class="op">)</span>        <span class="co"># Package setup utilities</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://testthat.r-lib.org" class="external-link">testthat</a></span><span class="op">)</span>       <span class="co"># Testing framework</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a></span><span class="op">)</span>        <span class="co"># Documentation website</span></span>
<span></span>
<span><span class="co"># Data pipeline (Phase 2)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/targets/" class="external-link">targets</a></span><span class="op">)</span>        <span class="co"># Workflow management</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tarchetypes/" class="external-link">tarchetypes</a></span><span class="op">)</span>    <span class="co"># Additional target types</span></span>
<span></span>
<span><span class="co"># Large data support (Phase 3)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r.duckdb.org/" class="external-link">duckdb</a></span><span class="op">)</span>         <span class="co"># In-process database</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span>            <span class="co"># Database interface</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="key-functions--architecture">Key Functions &amp; Architecture<a class="anchor" aria-label="anchor" href="#key-functions--architecture"></a></h2>
<div class="section level3">
<h3 id="main-interface">Main Interface<a class="anchor" aria-label="anchor" href="#main-interface"></a></h3>
<ul><li>
<strong><code><a href="reference/list_datasets.html">list_datasets()</a></code></strong>: Dataset discovery function</li>
<li>
<strong><code>get_dataset(name)</code></strong>: Unified data access function</li>
</ul></div>
<div class="section level3">
<h3 id="dataset-registry-system">Dataset Registry System<a class="anchor" aria-label="anchor" href="#dataset-registry-system"></a></h3>
<ul><li>
<strong>Registry file</strong>: <code>inst/extdata/datasets.yaml</code>
</li>
<li>
<strong>Functions</strong>: <code><a href="reference/load_dataset_registry.html">load_dataset_registry()</a></code>, <code><a href="reference/get_dataset_info.html">get_dataset_info()</a></code>, <code>update_registry_entry()</code>
</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="common-commands">Common Commands<a class="anchor" aria-label="anchor" href="#common-commands"></a></h2>
<div class="section level3">
<h3 id="development-workflow">Development Workflow<a class="anchor" aria-label="anchor" href="#development-workflow"></a></h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load and test changes</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update documentation</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check package</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update data (with targets)</span></span>
<span><span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_make.html" class="external-link">tar_make</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="package-development">Package Development<a class="anchor" aria-label="anchor" href="#package-development"></a></h3>
<ul><li>
<strong>Build package</strong>: <code>R CMD build .</code>
</li>
<li>
<strong>Check package</strong>: <code>R CMD check --as-cran *.tar.gz</code>
</li>
<li>
<strong>Install package</strong>: <code>R CMD INSTALL .</code>
</li>
<li>
<strong>Test package</strong>: <code>devtools::test()</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a></h3>
<ul><li>
<strong>Build documentation</strong>: <code>devtools::document()</code>
</li>
<li>
<strong>Build vignettes</strong>: <code>devtools::build_vignettes()</code>
</li>
<li>
<strong>Build pkgdown site</strong>: <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code>
</li>
</ul></div>
<div class="section level3">
<h3 id="data-pipeline-operations">Data Pipeline Operations<a class="anchor" aria-label="anchor" href="#data-pipeline-operations"></a></h3>
<div class="section level4">
<h4 id="running-the-pipeline-locally">Running the Pipeline Locally<a class="anchor" aria-label="anchor" href="#running-the-pipeline-locally"></a></h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load targets library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/targets/" class="external-link">targets</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View all targets</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_manifest.html" class="external-link">tar_manifest</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check which targets are outdated</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_outdated.html" class="external-link">tar_outdated</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run entire pipeline</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_make.html" class="external-link">tar_make</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run specific targets (e.g., just ABECIP)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_make.html" class="external-link">tar_make</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"abecip_data"</span>, <span class="st">"abecip_cache"</span>, <span class="st">"abecip_validation"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize pipeline</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_visnetwork.html" class="external-link">tar_visnetwork</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="automated-updates-github-actions">Automated Updates (GitHub Actions)<a class="anchor" aria-label="anchor" href="#automated-updates-github-actions"></a></h4>
<ul><li>
<strong>Weekly updates</strong>: Runs every Monday at 10 AM UTC</li>
<li>
<strong>Manual trigger</strong>: Go to Actions ‚Üí ‚ÄúWeekly Data Updates‚Äù ‚Üí ‚ÄúRun workflow‚Äù</li>
<li>
<strong>Target groups</strong>:
<ul><li>
<code>weekly</code>: BCB, FGV, ABECIP, ABRAINC, SECOVI, RPPI (8 datasets)</li>
<li>
<code>monthly</code>: BIS, CBIC, Property Records (3 datasets)</li>
<li>
<code>all</code>: All datasets</li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="pipeline-architecture">Pipeline Architecture<a class="anchor" aria-label="anchor" href="#pipeline-architecture"></a></h4>
<p>The pipeline uses the modern <code><a href="reference/get_dataset.html">get_dataset()</a></code> interface with three targets per dataset: 1. <strong><code>{dataset}_data</code></strong>: Fetches fresh data using <code>get_dataset(source="fresh")</code> 2. <strong><code>{dataset}_cache</code></strong>: Saves to <code>inst/cached_data/</code> directory 3. <strong><code>{dataset}_validation</code></strong>: Validates data quality</p>
<p><strong>Weekly Datasets</strong> (7-day update cycle): - bcb_series, bcb_realestate, fgv_ibre - abecip, abrainc, secovi - rppi_sale, rppi_rent</p>
<p><strong>Monthly Datasets</strong> (30-day update cycle): - bis_rppi, cbic, property_records</p>
<p><strong>Manual Only</strong>: - nre_ire (never auto-updates)</p>
</div>
</div>
<div class="section level3">
<h3 id="code-quality">Code Quality<a class="anchor" aria-label="anchor" href="#code-quality"></a></h3>
<ul><li>Look into claude/coding_guidelines.md for detailed coding standards</li>
<li>
<strong>Lint code</strong>: <code>lintr::lint_package()</code>
</li>
<li>
<strong>Style code</strong>: <code>styler::style_pkg()</code>
</li>
<li>
<strong>Final check</strong>: <code>devtools::check(cran = TRUE)</code>
</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="development-standards">Development Standards<a class="anchor" aria-label="anchor" href="#development-standards"></a></h2>
<ul><li>Always refer to claude/coding_guidelines.md for detailed instructions</li>
</ul><div class="section level3">
<h3 id="document-changes">Document changes<a class="anchor" aria-label="anchor" href="#document-changes"></a></h3>
<ul><li>Update <code>NEWS.md</code> with each release</li>
<li>Commit to GitHub with descriptive messages</li>
</ul></div>
<div class="section level3">
<h3 id="code-style">Code Style<a class="anchor" aria-label="anchor" href="#code-style"></a></h3>
<ul><li>Follow tidyverse style guide.</li>
<li>Use explicit package calls (<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code>) in functions.</li>
<li>Document all exported functions with roxygen2.</li>
<li>Prefer readability over brevity.</li>
<li>Use meaningful variable names.</li>
</ul></div>
<div class="section level3">
<h3 id="error-handling-pattern">Error Handling Pattern<a class="anchor" aria-label="anchor" href="#error-handling-pattern"></a></h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Graceful degradation with fallbacks</span></span>
<span><span class="va">get_dataset</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">source</span> <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu">load_from_cache</span><span class="op">(</span><span class="va">name</span><span class="op">)</span>  <span class="co"># Try primary method</span></span>
<span>  <span class="op">}</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu">download_from_github</span><span class="op">(</span><span class="va">name</span><span class="op">)</span>  <span class="co"># Try secondary method</span></span>
<span>    <span class="op">}</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e2</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">download_fresh</span><span class="op">(</span><span class="va">name</span><span class="op">)</span>  <span class="co"># Try fresh download</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-validation">Data Validation<a class="anchor" aria-label="anchor" href="#data-validation"></a></h3>
<ul><li>Check required columns and data types</li>
<li>Validate reasonable ranges</li>
<li>Check for duplicates</li>
<li>Always validate data before saving to package</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="project-structure">Project Structure<a class="anchor" aria-label="anchor" href="#project-structure"></a></h2>
<pre><code>realestatebr/
‚îú‚îÄ‚îÄ .claude/                    # Claude Code configuration
‚îú‚îÄ‚îÄ _targets.R                  # Data processing pipeline (Phase 2)
‚îú‚îÄ‚îÄ data-raw/                   # Data processing scripts
‚îÇ   ‚îú‚îÄ‚îÄ functions.R             # Pipeline functions
‚îÇ   ‚îú‚îÄ‚îÄ validation.R            # Data validation rules
‚îÇ   ‚îî‚îÄ‚îÄ [dataset].R             # Individual dataset scripts
‚îú‚îÄ‚îÄ R/                          # Package functions
‚îÇ   ‚îú‚îÄ‚îÄ list-datasets.R         # Dataset discovery
‚îÇ   ‚îú‚îÄ‚îÄ get-dataset.R           # Unified data access
‚îÇ   ‚îú‚îÄ‚îÄ get-*.R                 # Legacy functions
‚îÇ   ‚îú‚îÄ‚îÄ database.R              # DuckDB integration (Phase 3)
‚îÇ   ‚îú‚îÄ‚îÄ cache.R                 # Caching utilities
‚îÇ   ‚îú‚îÄ‚îÄ utils.R                 # Helper functions
‚îÇ   ‚îî‚îÄ‚îÄ data-*.R                # Dataset documentation
‚îú‚îÄ‚îÄ inst/extdata/
‚îÇ   ‚îú‚îÄ‚îÄ datasets.yaml           # Dataset registry
‚îÇ   ‚îú‚îÄ‚îÄ cache/                  # Cached datasets
‚îÇ   ‚îî‚îÄ‚îÄ validation/             # Validation rules
‚îú‚îÄ‚îÄ tests/testthat/             # Unit tests
‚îú‚îÄ‚îÄ vignettes/                  # Package documentation
‚îú‚îÄ‚îÄ man/                        # Generated documentation
‚îî‚îÄ‚îÄ docs/                       # pkgdown website</code></pre>
</div>
<div class="section level2">
<h2 id="adding-new-datasets">Adding New Datasets<a class="anchor" aria-label="anchor" href="#adding-new-datasets"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Create processing script</strong>: <code>data-raw/[dataset-name].R</code>
</li>
<li>
<strong>Add to registry</strong>: Update <code>inst/extdata/datasets.yaml</code>
</li>
<li>
<strong>Update functions</strong>: Add mapping in <code><a href="reference/get_dataset.html">get_dataset()</a></code> switch statement</li>
<li>
<strong>Document</strong>: Create <code>R/data-[dataset-name].R</code> with roxygen2 docs</li>
<li>
<strong>Test</strong>: Add tests in <code>tests/testthat/test-[dataset-name].R</code>
</li>
</ol></div>
<div class="section level2">
<h2 id="important-notes">Important Notes<a class="anchor" aria-label="anchor" href="#important-notes"></a></h2>
<ul><li>
<strong>Data Quality</strong>: Always validate data before saving to package</li>
<li>
<strong>User Experience</strong>: Keep interface simple - complexity should be hidden</li>
<li>
<strong>Performance</strong>: Cache aggressively, download only when necessary</li>
<li>
<strong>Documentation</strong>: Every dataset needs proper documentation and examples</li>
<li>
<strong>Attribution</strong>: Always provide proper citations for data sources</li>
<li>
<strong>Web Scraping</strong>: Use appropriate user agents and rate limiting</li>
</ul></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vinicius Oike Reginatto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

